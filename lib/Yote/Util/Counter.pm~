package Yote::Util::Counter;

use base 'Yote::AppRoot';

sub new {
    my $c =  Yote::Obj::new( @_ );
    print STDERR Data::Dumper->Dump(["BLESSY COUNTER $c",$c]);
    return $c;    
}

sub _init {
    my $self = shift;
    $self->set_counts( {} );
}

sub _load {
    my $self = shift;
    $self->set_counts( {} );
    print STDERR Data::Dumper->Dump(["LOAD COUNTER $self ( $self->{ID} )",$self]);
}

sub foo {}

sub increment {
    my( $self, $data, $account ) = @_;
    my $new_val = 1 + Yote::ObjProvider::xpath( $self->_path_to_root() . "/counts/$data" );
    Yote::ObjProvider::xpath_insert( $self->_path_to_root() . "/counts/$data", $new_val );
    return $new_val;
}

1;

__END__
